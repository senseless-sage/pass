function E(_){return!_.startsWith(self.location.origin)}function F(_){return _.split("/").slice(2,3).join("/")}function g(_){const z=_.split("/").slice(3).join("/");return z===""?"":I(z)}function f(_,z){return _===z+"/"?"":_.startsWith(z)?_.substring(z.length):_}function p(_){return _!==""&&_.slice(-3)!==".js"&&_.slice(-4)!==".mjs"?_+".js":_}function R(_){return _.charAt(_.length-1)==="/"}function O(_){return _!==""&&!R(_)?_+"/":_}function I(_){return _!==""&&_.charAt(0)!=="/"?"/"+_:_}function B(_){return _!=="/"&&R(_)?_.slice(0,-1):_}function H(_){return _!=="/"&&_.charAt(0)==="/"?_.substring(1):_}function x(_){return _!=="."&&_.charAt(0)==="."?_.substring(1):_}function c(_){return _.substring(0,_.lastIndexOf("/"))}function h(_){return _.substring(_.lastIndexOf("/")+1)}var y="resolvedPathname",j="__router_config",T="__router_cached_files";class W{pathPrefix;pagesNamesLoader;pagesPath;pageComponentFolderName;componentsPath;assetPaths;jsPaths;apiPath;mockPath;mockPaths;useMocking;formatHtmlComponents;useCache;autoUpdateCache;language;translationsPath;constructor(_,z,J,Q,X,Y,V,Z,w,$,G,A,M,L,K){if(this.pathPrefix=I(_),this.pagesNamesLoader=z,this.pagesPath=J,this.pageComponentFolderName=Q,this.componentsPath=X,this.assetPaths=Y,this.jsPaths=V,this.apiPath=Z,this.mockPath=w,this.useMocking=$,this.formatHtmlComponents=G,this.useCache=A,this.autoUpdateCache=M,this.language=L,this.translationsPath=K,this.assetPaths.push(X,K),$)this.jsPaths.push(w)}}function k(_,z,J){return!_?J():caches.open(T).then((Q)=>Q.match(z).then((X)=>{if(X)return X;return J().then((Y)=>{if(Y.status<400)return Q.put(z,Y.clone()).then(()=>Y);else return Y})}))}function d(_,z){const J=self.location.origin+z.pathPrefix+_;return k(z.useCache,J,()=>fetch(J))}function U(path,config){const listDirContentFunc=eval(config.pagesNamesLoader);return listDirContentFunc(path,config).then((_)=>_.filter((z)=>!z.includes("..")&&!z.includes("//")).map((z)=>H(x(encodeURI(decodeURI(z)))))).catch((_)=>{console.warn(_);return})}function r(){return((_,z)=>d(O(_),z).then((J)=>J.status===404?Promise.reject(new Error(`No files found in dir: "${_}".`)):J).then((J)=>J.text()).then((J)=>Array.from(J.matchAll(/<a.*?href=["'](.*?)["']/g)).map((Q)=>Q[1]))).toString()}function e(_,z,J){return((Q,X)=>{const Y=`https://api.github.com/repos/\$user/\$repo/contents/\$dir/${B(H(Q))}`;return k(X.useCache,Y,()=>fetch(Y)).then((V)=>V.json()).then((V)=>{if(V.status==="404")return Promise.reject(new Error(`No files found in dir: "${Q}".`));if(!Array.isArray(V))return V.type==="dir"?[O(V.name)]:[V.name];return V.map((Z)=>Z.type==="dir"?O(Z.name):Z.name)})}).toString().replace("$user",_).replace("$repo",z).replace("$dir",J)}async function N(_,z,J){const Q=await U(_,z);if(Q===void 0)return;for(let X of Q)if(X[X.length-1]==="/")await N(_+X,z,J);else J.add(_.substring(z.mockPath.length,_.length-1))}async function V1(_){if(_.useMocking){const z=new Set;await N(O(_.mockPath),_,z),_.mockPaths=Array.from(z)}if(m(_),_.useCache&&_.autoUpdateCache)caches.delete(T);self.skipWaiting()}function m(_){return caches.open(j).then((z)=>z.put("/",new Response(JSON.stringify(_))))}function X1(){return caches.open(j).then((_)=>_.match("/")).then((_)=>_.text()).then(JSON.parse)}function $1(_){return new Response(null,{status:301,headers:{Location:_.slice(0,-1)}})}function w1(){return window.location[y]}function C(_,z){if(z===void 0)return;const J=_.split("/"),Q=z.split("/"),X=J.filter((V)=>!Q.includes(V)),Y=Q.filter((V)=>V.startsWith("%5B")&&V.endsWith("%5D")).map((V)=>V.slice(3,-3));return new Map(Y.map((V,Z)=>[V,X[Z]]))}function A1(_,z){if(z.useCache)caches.delete(T);return _.registration.unregister().then(()=>_.clients.matchAll()).then((J)=>J.forEach((Q)=>Q.navigate(Q.url))).then(()=>new Response(null,{status:301,headers:{Location:_.location.origin+z.pathPrefix}}))}function b(_,z){return Array.from({length:z-_+1},(J,Q)=>_+Q)}async function D(_,z,J){const Q=z.startsWith(_);z=Q?z.substring(_.length):z;let X="/";for(let Y of z.split("/")){if(Y==="")continue;if(await U(_+X+Y,J)!==void 0)X+=Y+"/";else{const Z=_+X,w=await U(Z,J).then(($)=>{if($===void 0)return;const G=$.filter((A)=>A.startsWith("%5B")&&A.endsWith("%5D/")).map((A)=>B(A));if(G.length===0)return;if(G.length>1)throw new Error("You cannot have multiple dynamic subdirectories in the same directory.");return G[0]});if(w===void 0)return;X+=w+"/"}}return X=B(X),Q?_+X:X}function F1(_,z,J){const Q=E(_)?F(_):void 0,X=H(B(Q===void 0?z:Q+z)).split("/");return J.mockPaths.filter((V)=>V.startsWith(Q===void 0?"/same-origin/":"/cross-origin/"+Q)).map((V)=>V.split("/").slice(2)).filter((V)=>V.length===X.length).some((V)=>b(0,X.length).every((Z)=>V[Z]===X[Z]||V[Z].startsWith("%5B")&&V[Z].endsWith("%5D")))}function I1(){const _=new BroadcastChannel(S),z=new BroadcastChannel(v);_.onmessage=(J)=>{import(J.data.url).then((Q)=>Q.default(J.data,C(J.data.path,J.data.resolvedPath))).then((Q)=>{z.postMessage({ok:!0,result:Q})}).catch((Q)=>{z.postMessage({ok:!1,reason:Q})})}}async function j1(_,z,J){const Q=E(J.url)?"/cross-origin/"+F(J.url)+_:"/same-origin"+_,X=new q(await J.text(),J.cache,J.credentials,J.destination,Array.from(J.headers.entries()),J.integrity,J.keepalive,J.method,J.mode,J.redirect,J.referrer,J.referrerPolicy,J.url,self.location.origin+z.pathPrefix+z.mockPath+Q+"/mock.js",_),Y=new BroadcastChannel(S),V=new BroadcastChannel(v);return new Promise((Z)=>{V.onmessage=async(w)=>{if(!w.data.ok){const $=E(J.url)?void 0:await D(z.mockPath+"/same-origin",_,z);if($===void 0||_===$)return Y.close(),V.close(),Z(new Response(w.data.reason,{status:404}));else X.url=self.location.origin+z.pathPrefix+z.mockPath+"/same-origin"+$+"/mock.js",X.resolvedPath=$,Y.postMessage(X)}else return Y.close(),V.close(),Z(new Response(w.data.result,{status:200}))},Y.postMessage(X)})}var S="__mock_file_executor",v="__mock_file_execution_requester";class q{body;cache;credentials;destination;headers;integrity;keepalive;method;mode;redirect;referrer;referrerPolicy;originalUrl;url;path;resolvedPath;constructor(_,z,J,Q,X,Y,V,Z,w,$,G,A,M,L,K,P){this.body=_,this.cache=z,this.credentials=J,this.destination=Q,this.headers=X,this.integrity=Y,this.keepalive=V,this.method=Z,this.mode=w,this.redirect=$,this.referrer=G,this.referrerPolicy=A,this.originalUrl=M,this.url=L,this.path=K,this.resolvedPath=P}}
export{E as u,g as v,f as w,p as x,I as y,B as z,x as A,c as B,h as C,y as D,W as E,k as F,d as G,r as H,e as I,V1 as J,X1 as K,$1 as L,w1 as M,C as N,A1 as O,D as P,F1 as Q,I1 as R,j1 as S};
