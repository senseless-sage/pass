function E(_){return!_.startsWith(self.location.origin)}function L(_){return _.split("/").slice(2,3).join("/")}function f(_){const z=_.split("/").slice(3).join("/");return z===""?"":R(z)}function F(_){return _=T(_),_===""?"":R(_.substring(0,_.indexOf("/")))}function p(_,z){return _===z+"/"?"":_.startsWith(z)?_.substring(z.length):_}function c(_){return _!==""&&_.slice(-3)!==".js"&&_.slice(-4)!==".mjs"?_+".js":_}function k(_){return _.charAt(_.length-1)==="/"}function O(_){return _!==""&&!k(_)?_+"/":_}function R(_){return _!==""&&_.charAt(0)!=="/"?"/"+_:_}function B(_){return _!=="/"&&k(_)?_.slice(0,-1):_}function T(_){return _!=="/"&&_.charAt(0)==="/"?_.substring(1):_}function x(_){return _!=="."&&_.charAt(0)==="."?_.substring(1):_}function h(_){return _.substring(0,_.lastIndexOf("/"))}function u(_){return _.substring(_.lastIndexOf("/")+1)}var y="resolvedPathname",I="__router_config",W="__router_cached_files";class H{pathPrefix;pagesNamesLoader;pagesPath;pageComponentFolderName;componentsPath;assetPaths;jsPaths;apiPath;mockPath;mockPaths;useMocking;formatHtmlComponents;useCache;autoUpdateCache;language;translationsPath;constructor(_,z,J,Q,X,Y,V,Z,$,w,G,A,M,K){if(this.pagesNamesLoader=_,this.pagesPath=z,this.pageComponentFolderName=J,this.componentsPath=Q,this.assetPaths=X,this.jsPaths=Y,this.apiPath=V,this.mockPath=Z,this.useMocking=$,this.formatHtmlComponents=w,this.useCache=G,this.autoUpdateCache=A,this.language=M,this.translationsPath=K,this.assetPaths.push(Q,K),$)this.jsPaths.push(Z)}}function j(_,z,J){return!_?J():caches.open(W).then((Q)=>Q.match(z).then((X)=>{if(X)return X;return J().then((Y)=>{if(Y.status<400)return Q.put(z,Y.clone()).then(()=>Y);else return Y})}))}function m(_,z){const J=self.location.origin+z.pathPrefix+_;return j(z.useCache,J,()=>fetch(J))}function U(path,config){const listDirContentFunc=eval(config.pagesNamesLoader);return listDirContentFunc(path,config).then((_)=>_.filter((z)=>!z.includes("..")&&!z.includes("//")).map((z)=>T(x(encodeURI(decodeURI(z)))))).catch((_)=>{console.warn(_);return})}function r(){return((_,z)=>m(O(_),z).then((J)=>J.status===404?Promise.reject(new Error(`No files found in dir: "${_}".`)):J).then((J)=>J.text()).then((J)=>Array.from(J.matchAll(/<a.*?href=["'](.*?)["']/g)).map((Q)=>Q[1]))).toString()}function e(_,z,J){return((Q,X)=>{const Y=`https://api.github.com/repos/\$user/\$repo/contents/\$dir/${B(T(Q))}`;return j(X.useCache,Y,()=>fetch(Y)).then((V)=>V.json()).then((V)=>{if(V.status==="404")return Promise.reject(new Error(`No files found in dir: "${Q}".`));if(!Array.isArray(V))return V.type==="dir"?[O(V.name)]:[V.name];return V.map((Z)=>Z.type==="dir"?O(Z.name):Z.name)})}).toString().replace("$user",_).replace("$repo",z).replace("$dir",J)}async function N(_,z,J){const Q=await U(_,z);if(Q===void 0)return;for(let X of Q)if(X[X.length-1]==="/")await N(_+X,z,J);else J.add(_.substring(z.mockPath.length,_.length-1))}async function V1(_){if(_.pathPrefix=F(self.location.pathname),_.useMocking){const z=new Set;await N(O(_.mockPath),_,z),_.mockPaths=Array.from(z)}if(g(_),_.useCache&&_.autoUpdateCache)caches.delete(W);self.skipWaiting()}function g(_){return caches.open(I).then((z)=>z.put(_.pathPrefix?_.pathPrefix:"/",new Response(JSON.stringify(_))))}async function X1(){const _=F(self.location.pathname),z=await caches.open(I),J=await z.match(_?_:"/");if(J!==void 0)return J.text().then(JSON.parse);if(_)return z.match("/").then((Q)=>Q.text().then(JSON.parse));return Promise.reject("No router config found.")}function $1(_){return new Response(null,{status:301,headers:{Location:_.slice(0,-1)}})}function w1(){return window.location[y]}function C(_,z){if(z===void 0)return;const J=_.split("/"),Q=z.split("/"),X=J.filter((V)=>!Q.includes(V)),Y=Q.filter((V)=>V.startsWith("%5B")&&V.endsWith("%5D")).map((V)=>V.slice(3,-3));return new Map(Y.map((V,Z)=>[V,X[Z]]))}function A1(_,z){if(z.useCache)caches.delete(W);return _.registration.unregister().then(()=>_.clients.matchAll()).then((J)=>J.forEach((Q)=>Q.navigate(Q.url))).then(()=>new Response(null,{status:301,headers:{Location:_.location.origin+z.pathPrefix}}))}function D(_,z){return Array.from({length:z-_+1},(J,Q)=>_+Q)}async function b(_,z,J){const Q=z.startsWith(_);z=Q?z.substring(_.length):z;let X="/";for(let Y of z.split("/")){if(Y==="")continue;if(await U(_+X+Y,J)!==void 0)X+=Y+"/";else{const Z=_+X,$=await U(Z,J).then((w)=>{if(w===void 0)return;const G=w.filter((A)=>A.startsWith("%5B")&&A.endsWith("%5D/")).map((A)=>B(A));if(G.length===0)return;if(G.length>1)throw new Error("You cannot have multiple dynamic subdirectories in the same directory.");return G[0]});if($===void 0)return;X+=$+"/"}}return X=B(X),Q?_+X:X}function F1(_,z,J){const Q=E(_)?L(_):void 0,X=T(B(Q===void 0?z:Q+z)).split("/");return J.mockPaths.filter((V)=>V.startsWith(Q===void 0?"/same-origin/":"/cross-origin/"+Q)).map((V)=>V.split("/").slice(2)).filter((V)=>V.length===X.length).some((V)=>D(0,X.length).every((Z)=>V[Z]===X[Z]||V[Z].startsWith("%5B")&&V[Z].endsWith("%5D")))}function I1(){const _=new BroadcastChannel(v),z=new BroadcastChannel(S);_.onmessage=(J)=>{import(J.data.url).then((Q)=>Q.default(J.data,C(J.data.path,J.data.resolvedPath))).then((Q)=>{z.postMessage({ok:!0,result:Q})}).catch((Q)=>{z.postMessage({ok:!1,reason:Q})})}}async function j1(_,z,J){const Q=E(J.url)?"/cross-origin/"+L(J.url)+_:"/same-origin"+_,X=new q(await J.text(),J.cache,J.credentials,J.destination,Array.from(J.headers.entries()),J.integrity,J.keepalive,J.method,J.mode,J.redirect,J.referrer,J.referrerPolicy,J.url,self.location.origin+z.pathPrefix+z.mockPath+Q+"/mock.js",_),Y=new BroadcastChannel(v),V=new BroadcastChannel(S);return new Promise((Z)=>{V.onmessage=async($)=>{if(!$.data.ok){const w=E(J.url)?void 0:await b(z.mockPath+"/same-origin",_,z);if(w===void 0||_===w)return Y.close(),V.close(),Z(new Response($.data.reason,{status:404}));else X.url=self.location.origin+z.pathPrefix+z.mockPath+"/same-origin"+w+"/mock.js",X.resolvedPath=w,Y.postMessage(X)}else return Y.close(),V.close(),Z(new Response($.data.result,{status:200}))},Y.postMessage(X)})}var v="__mock_file_executor",S="__mock_file_execution_requester";class q{body;cache;credentials;destination;headers;integrity;keepalive;method;mode;redirect;referrer;referrerPolicy;originalUrl;url;path;resolvedPath;constructor(_,z,J,Q,X,Y,V,Z,$,w,G,A,M,K,P,d){this.body=_,this.cache=z,this.credentials=J,this.destination=Q,this.headers=X,this.integrity=Y,this.keepalive=V,this.method=Z,this.mode=$,this.redirect=w,this.referrer=G,this.referrerPolicy=A,this.originalUrl=M,this.url=K,this.path=P,this.resolvedPath=d}}
export{E as u,f as v,p as w,c as x,R as y,B as z,x as A,h as B,u as C,y as D,H as E,j as F,m as G,r as H,e as I,V1 as J,X1 as K,$1 as L,w1 as M,C as N,A1 as O,b as P,F1 as Q,I1 as R,j1 as S};
